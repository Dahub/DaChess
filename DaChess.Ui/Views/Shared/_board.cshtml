<canvas id="canvas" width="400" height="400" style="border:1px solid #000000;" onclick="getMousePos(this, event)"></canvas>

<img id="b_rook" src="/Content/Images/Pieces/b_rook.svg" style="visibility:hidden" />
<img id="b_knight" src="/Content/Images/Pieces/b_knight.svg" style="visibility:hidden" />
<img id="b_bishop" src="/Content/Images/Pieces/b_bishops.svg" style="visibility:hidden" />
<img id="b_queen" src="/Content/Images/Pieces/b_queen.svg" style="visibility:hidden" />
<img id="b_king" src="/Content/Images/Pieces/b_king.svg" style="visibility:hidden" />
<img id="b_pawn" src="/Content/Images/Pieces/b_pawn.svg" style="visibility:hidden" />
<img id="w_rook" src="/Content/Images/Pieces/w_rook.svg" style="visibility:hidden" />
<img id="w_knight" src="/Content/Images/Pieces/w_knight.svg" style="visibility:hidden" />
<img id="w_bishop" src="/Content/Images/Pieces/w_bishops.svg" style="visibility:hidden" />
<img id="w_queen" src="/Content/Images/Pieces/w_queen.svg" style="visibility:hidden" />
<img id="w_king" src="/Content/Images/Pieces/w_king.svg" style="visibility:hidden" />
<img id="w_pawn" src="/Content/Images/Pieces/w_pawn.svg" style="visibility:hidden" />


<script type="text/javascript">
    var size = 400;
    var caseNumber = 8;
    var caseSize = size / caseNumber;
    var pieceSize = (4 * caseSize) / 5;
    var piecePadding = caseSize / 10;

    var moveStep = 0;
    var moveText = '';

    function refreshCanvas() {
        var c = $("#canvas");
        var ctx = c[0].getContext('2d');
        ctx.clearRect(0, 0, size, size);

        ctx.fillStyle = "#ffff99";
        ctx.fillRect(0, 0, size, size);

        ctx.fillStyle = "#cc6600";
        var startCase = 1;
        for (posY = 0; posY < caseNumber; posY = posY + 1) {
            for (posX = startCase; posX < caseNumber; posX = posX + 2) {
                ctx.fillRect(posX * caseSize, posY * caseSize, caseSize, caseSize);
            }
            if (startCase == 1) {
                startCase = 0;
            }
            else {
                startCase = 1;
            }
        }

        for (var i = 0; i < myBoard.board.length; i++) {
            if (isEmpty(myBoard.board[i].piece) == false) {
                var xPos = ((letterToNumber(myBoard.board[i].col) - 1) * caseSize) + piecePadding;
                var yPos = ((caseNumber - myBoard.board[i].line) * caseSize) + piecePadding;
                var myImage = document.querySelector('#' + myBoard.board[i].piece + '');
                ctx.drawImage(myImage, xPos, yPos, pieceSize, pieceSize);
            }
        }
    }

    function getMousePos(canvas, evt) {
        if (moveStep == 2) {
            refreshCanvas();
            moveStep = 0;
            moveText = '';
        }
        moveStep++;

        var rect = canvas.getBoundingClientRect();
        var xcord = evt.clientX - rect.left
        var ycord = evt.clientY - rect.top


        // y => chiffres
        ycord = caseNumber - Math.trunc(ycord / caseSize);
        xcord = Math.trunc(xcord / caseSize);
        var result = String.fromCharCode(97 + xcord) + ycord.toString();

        var c = $("#canvas");
        var ctx = c[0].getContext('2d');

        ctx.fillStyle = 'rgba(23, 105, 138, 0.5)';
        ctx.fillRect(xcord * caseSize, size - ycord * caseSize, caseSize, caseSize);

        moveText += result;
        moveText += ' ';
        console.log(moveText);
    }

    function letterToNumber(letter) {
        return letter.charCodeAt(0) - 96;
    }
</script>